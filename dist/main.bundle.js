(()=>{"use strict";(()=>{var e=document.getElementsByTagName("body")[0],t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div"),r=4,i=document.createElement("div"),c=document.createElement("div");function o(){function e(){var e=new Array(r*r).fill(0).map((function(e,t){return t+1}));e.forEach((function(t){var n=document.createElement("button");n.classList.add("game-button"),n.dataset.madrixId="".concat(t),n.innerHTML="".concat(t);var a=i.offsetWidth;return n.style.width="".concat(a/r,"px"),n.style.height="".concat(a/r,"px"),i.appendChild(n),e}))}document.getElementsByClassName("game-button").length?(i.querySelectorAll("*").forEach((function(e){return e.remove()})),e()):e()}var d,s,l,u=i.getElementsByClassName("game-button");function m(e){e||(e=Array.from(u).map((function(e){return Number(e.dataset.madrixId)})));for(var t=function(){for(var e=[],t=0;t<+r;t++)e.push([]);return e}(),n=0,a=0,i=0;i<e.length;i++)a>=r&&(n++,a=0),t[n][a]=e[i],a++;return t}!function(){t.classList.add("wrapper"),e.appendChild(t);var n=document.createElement("h1");n.innerHTML="Gem Puzzle",t.appendChild(n)}(),function(){var e=document.createElement("div");e.classList.add("container-buttons"),t.appendChild(e);var n=new Array(4).fill(0).map((function(e,t){return t+1})),a=["Shuffle and play","Stop","Save","Results"];n.forEach((function(t,n){var r=document.createElement("button");r.classList.add("controls"),e.appendChild(r),r.innerHTML=a[n]}))}(),(d=document.createElement("div")).classList.add("counters"),t.appendChild(d),n.innerHTML="Moves:",a.innerHTML="Time:",d.appendChild(n),d.appendChild(a),s=document.createElement("div"),n.appendChild(s),l=document.createElement("div"),a.appendChild(l),i.classList.add("board-plate"),t.appendChild(i),o(),function(){c.classList.add("sizes"),t.appendChild(c);var e=["Other sizes:","3x3","4x4","5x5","6x6","7x7"];new Array(6).fill(0).map((function(t,n){var a=document.createElement("p");a.classList.add("size"),a.innerHTML=e[n],c.appendChild(a)})),c.addEventListener("click",(function(e){var t=Array.from(document.getElementsByClassName("size")),n=e.target.innerHTML;t.forEach((function(t,a){if(t.innerHTML[2]!==e.target.innerHTML[0])return r=Number(n[0])}))})),c.addEventListener("click",o)}(),c.addEventListener("click",(function(){u=i.getElementsByClassName("game-button")}));var f=m();g(),c.addEventListener("click",g);var v,p=h();function h(){return f.flat().map((function(e){return{el:e,sort:Math.random()}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.el}))}function y(e){for(var t=0;t<f.length;t++)for(var n=0;n<f[t].length;n++){var a=f[t][n];E(u[a-1],n,t)}}function E(e,t,n){var a=i.offsetWidth/r;e.style.transform="translate3D(".concat(t*a,"px, ").concat(n*a,"px, 0)")}function g(){Array.from(document.getElementsByClassName("game-button")).at(-1).style.display="none"}function L(){var e=Array.from(document.getElementsByClassName("game-button"));return v=Number(e.at(-1).dataset.madrixId)}function x(e,t){for(var n=0;n<t.length;n++)for(var a=0;a<t[n].length;a++)if(t[n][a]===e)return{x:a,y:n};return null}f=m(p),y(),document.getElementsByClassName("controls")[0].addEventListener("click",(function(){p=h(),f=m(p),y()})),y(),c.addEventListener("click",(function(e){f=m(),p=h(),f=m(p),y()})),v=L(),c.addEventListener("click",(function(){return v=L()})),i.addEventListener("click",(function(e){var t=e.target.closest("button");if(t){var n,a,r,c,o=x(Number(t.dataset.madrixId),f),d=x(v,f);n=o,a=d,r=Math.abs(n.x-a.x),c=Math.abs(n.y-a.y),!(1!==r&&1!==c||n.x!==a.x&&n.y!==a.y)&&(function(e,t,n){var a=n[e.y][e.x];n[e.y][e.x]=n[t.y][t.x],n[t.y][t.x]=a,function(e){for(var t=e.flat(),n=0;n<C.length;n++)if(t[n]!==C[n])return!1;return!0}(n)&&setTimeout((function(){i.classList.add(b),setTimeout((function(){i.classList.remove(b)}),1e3)}),200)}(o,d,f),y())}}));var C=new Array(r*r).fill(0).map((function(e,t){return t+1})),b="gem-gameWon"})()})();